.row
  .col-md-10
    %h1.page-header
      Kinder
      %small
        = @children.count
  .col-md-2
    %br
    %br
    .btn-group
      = link_to 'New Child', new_child_path, class: "btn btn-primary"

%table.table.table-bordered.table-condensed.table-hover
  %thead
    %tr
      %th Vorname
      %th Nachname
      %th Geburtsdatum
      %th Alter
      %th Telefon
      %th Bild
      %th Zelt
      %th

  %tbody
    - @children.each do |child|
      %tr
        %td= link_to child.first_name, child
        %td= link_to child.last_name, child
        %td= child.birthday.strftime "%d.%m.%Y"
        %td= child.age
        %td= truncate child.phone, length: 80
        %td
          - if child.image
            %img.center-block.img-rounded#child_image{style: "width: 18px; heigth: 18px;", src: "#{child.image}",  "data-toggle" => "modal", 'data-target' => "#myModal"}
              .modal.fade#myModal{tabindex: -1, role: "dialog", 'aria-labelledby' => "myModalLabel", 'aria-hidden'=> true}
                .modal-dialog
                  .modal-content
                    .modal-header
                      %h3= child.full_name
                    .modal-body
                      %img.img-responsive#child_image_overlay{src: "#{child.image}"}
                      
              :javascript
                function centerModal() {
                    $(this).css('display', 'block');
                    dialog = $(this).find(".modal-dialog");
                    offset = ($(window).height() - dialog.height()) / 2;
                    dialog.css("margin-top", offset);
                }
                $('.modal').on('show.bs.modal', centerModal);
                $(window).on("resize", function () {
                    $('.modal:visible').each(centerModal);
                });    
        %td
          - if child.tent
            = link_to "Zelt #{child.tent.number}", child.tent
        %td
          = link_to 'Edit', edit_child_path(child), class: "btn btn-default btn-xs"
          = link_to 'Destroy', child, :method => :delete, :data => { :confirm => 'Are you sure?' }, class: "btn btn-danger btn-xs"

